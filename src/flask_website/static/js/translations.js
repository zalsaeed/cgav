

const translations = {
    en: {
        Event: "Activities",
        Settings: "Settings",
        Contact: "Contact",
        Sign_out: "Sign out",
        Templates: "Templates",
        Dismiss: "Dismiss",
        english: "English",
        arabic: "Arabic",
        arabic_english: "Arabic & English",
        Your_Events: "Your Activities",
        Latest_Event: "Latest Activities",
        More_Info: "More Info",
        Load_More: "Load More",
        Add_Events: "Add Activity",
        Admin_page: "Admin Page",
        Explanation_Message: "Please select the language for the activity and the certificate:",
        Users: "Users",
        ID: "ID",
        First_Name: "First Name",
        Email: "Email",
        Role: "Role",
        Edit: "Edit",
        Delete: "Delete",
        Customizations_added_successfully: "Customizations added successfully!",
        Certificate_Appearance: "Certificate Appearance",
        Template_Name: "Template Name",
        bilingual: "bilingual",
        Certificate_items: "Certificate items (EN)",
        Certificate_items_ar: "Certificate items (AR)",
        All_positions_note: "All positions in numbers between 0.00 to 1.00.",
        Hide_signature_note: "Note: if you want to hide the signature set all values to '0.01'",
        X_Position: "X Position",
        Y_Position: "Y Position",
        Height: "Height",
        Width: "Width",
        Color: "Color",
        Text: "Alternative Text",
        Website: "Website",
        Twitter: "Twitter (X)",
        Website_URL: "Website URL",
        Website_Link: "Website Link",
        Twitter_Handle: "Twitter Handle",
        Twitter_Link: "Twitter Link",
        Preview: "Preview",
        Save: "Save",
        Add_Event: "Add Activity",
        Event_Information: "Activity Information:",
        Event_Title: "Activity Title",
        Secret_Phrase: "Secret Phrase",
        Presenter_Name: "Presenter Name",
        Event_Type: "Activity Type",
        Date: "Date",
        Template_Choice: "Template Choice",
        Signature_Information: "Signature Information",
        Signatory_Name_1: "First Signatory Name",
        Signatory_Position_1: "First Signatory Position",
        Signature_Image_1: "First Signature Image",
        Add_Second_Signatory: "Add Second Signatory",
        Signatory_Name_2: "Second Signatory Name",
        Signatory_Position_2: "Second Signatory Position",
        Signature_Image_2: "Second Signature Image",
        Attendance_Information: "Attendance Information",
        File: "File",
        Upload_Note: "Upload the attendance list as a CSV file. Ensure that the file format is correct to avoid upload errors.",
        Download_Sample_Text: "Not sure about the correct format?",
        Download_Sample_Link_Text: "Download a sample CSV file",
        Download_Sample_Append_Text: "to use as a template.",
        Arabic_Form: "Arabic form",
        English_Form: "English form",
        Introduction: "Introduction",
        Female_Recipient_Title: "Female Recipient Title",
        Male_Recipient_Title: "Male Recipient Title",
        Greeting_Male: "Greeting for Males",
        Greeting_Female: "Greeting for Females",
        Certificate_Description_Male: "Certificate Description for Males",
        Certificate_Description_Female: "Certificate Description for Females",
        Female_Recipient_Title_EN: "Female Recipient Title (EN)",
        Male_Recipient_Title_EN: "Male Recipient Title (EN)",
        Greeting_Male_EN: "Greeting for Males (EN)",
        Greeting_Female_EN: "Greeting for Females (EN)",
        Certificate_Description_Male_EN: "Certificate Description for Males (EN)",
        Certificate_Description_Female_EN: "Certificate Description for Females (EN)",
        Cancel: "Cancel",
        Your_Events: "Your Activities",
        Latest_Event: "Latest Activities",
        Presenter: "Presenter",
        Event_Date: "Activity date",
        Event_Type: "Activity Type",
        More_Info: "More Info",
        Load_More: "Load More",
        Add_Events: "Add Activity",
        Add_New_Template: "Add New Template",
        Template_Image: "Template Image",
        Manage_Event_Types: "Manage Activity Types",
        Add_New_Type: "Add New Type",
        Type_Name: "Type Name",
        Save: "Save",
        Cancel: "Cancel",
        Delete_Existing_Type: "Delete Existing Type",
        Select_Type_To_Delete: "Select Type to Delete",
        Delete: "Delete",
        Rights_Reserved: '© 2023 <a href="https://github.com/zalsaeed/cgav" class="hover:underline">Exporter</a>. All Rights Reserved.',
        Enter_Event_Title: "Enter activity title",
        Enter_Secret_Phrase: "Enter secret phrase",
        Enter_Presenter_Name: "Enter presenter name",
        Enter_First_Signatory_Name: "Enter first signature name",
        Enter_First_Signatory_Position: "Enter first signatory position",
        Enter_Second_Signatory_Name: "Enter second signature name",
        Enter_Second_Signatory_Position: "Enter second signatory position",
        Greeting_Male_Placeholder: "Best wishes for his success and prosperity",
        Greeting_Female_Placeholder: "Best wishes for her success and prosperity",
        Enter_Female_Recipient_Title: "Enter Female Recipient Title",
        Enter_Female_Recipient_Title: "Student:",
        Enter_Male_Recipient_Title: "Student:",
        Enter_Intro: "Computer of Collage in Qassim University statify that",
        Public_Profile: 'Public profile',
        Change_Name: 'Change Name',
        Change_Email: 'Change Email',
        Change_Password: 'Change Password',
        No_More_Events: 'No More Activities',
        All_Events: "All Activities",
        Add: 'Add',
        Type_Template_Name: 'Type Template Name',
        Select_Language: "Select Email's Content Language:",
        English: "English",
        Arabic: 'Arabic',
        Send_Emails: 'Send Emails',
        Select_All: 'Select All',
        Select_Emails: 'Select_Emails:',
        Enter_Content: "Dear User,\n\nPlease find attached your certificate for.",
        Enter_Subjectt: 'Attending Certificate',
        Preview_Default_Email: 'Preview_Default_Email:',
        Include_Event_Information: 'Include Activity Information',
    },
    ar: {
        Event: "الأنشطة",
        Settings: "الاعدادات",
        Contact: "تواصل معنا",
        Sign_out: "تسجيل خروج",
        Templates: "القوالب",
        Dismiss: "إنهاء",
        english: "الانجليزية",
        arabic: "العربية",
        arabic_english: "العربية والإنجليزية",
        Your_Events: "الأنشطة التي قمت بإنشائها",
        Latest_Event: "آخر الأنشطة",
        More_Info: "المزيد من المعلومات",
        Load_More: "تحميل المزيد",
        Add_Events: "إضافة نشاط",
        Admin_page: "صفحة المدير",
        Explanation_Message: "يرجى تحديد اللغة للحدث والشهادة:",
        Users: "المستخدمون",
        ID: "المعرف",
        First_Name: "الاسم الأول",
        Email: "البريد الإلكتروني",
        Role: "الدور",
        Edit: "تحرير",
        Delete: "حذف",
        Customizations_added_successfully: "تمت إضافة التخصيصات بنجاح!",
        Certificate_Appearance: "مظهر الشهادة",
        Template_Name: "اسم القالب",
        bilingual: "ثنائي اللغة",
        Certificate_items: "عناصر الشهادة (EN)",
        Certificate_items_ar: "عناصر الشهادة",
        All_positions_note: "جميع المواضع في أرقام بين 0.00 إلى 1.00.",
        Hide_signature_note: "ملاحظة: إذا كنت تريد إخفاء التوقيع، قم بتعيين جميع القيم إلى '0.01'",
        X_Position: "الموضع X",
        Y_Position: "الموضع Y",
        Height: "الارتفاع",
        Width: "العرض",
        Color: "اللون",
        Text: "النص البديل",
        Website: "موقع الويب",
        Twitter: "تويتر (X)",
        Website_URL: "رابط موقع الويب",
        Website_Link: "اسم موقع الويب",
        Twitter_Handle: "حساب تويتر",
        Twitter_Link: "رابط تويتر",
        Preview: "معاينة",
        Save: "حفظ",
        Add_Event: "إضافة نشاط",
        Event_Information: "معلومات الأنشطة:",
        Event_Title: "عنوان النشاط",
        Secret_Phrase: "العبارة السرية",
        Presenter_Name: "اسم المقدم",
        Event_Type: "نوع النشاط",
        Date: "التاريخ",
        Template_Choice: "اختيار القالب",
        Signature_Information: "معلومات التوقيع",
        Signatory_Name_1: "اسم الموقع الأول",
        Signatory_Position_1: "موقع الموقع الأول",
        Signature_Image_1: "منصب التوقيع الأول",
        Add_Second_Signatory: "إضافة الموقع الثاني",
        Signatory_Name_2: "اسم الموقع الثاني",
        Signatory_Position_2: "منصب الموقع الثاني",
        Signature_Image_2: "صورة التوقيع الثاني",
        Attendance_Information: "معلومات الحضور",
        File: "الملف",
        Upload_Note: "قم بتحميل قائمة الحضور كملف CSV. تأكد من أن تنسيق الملف صحيح لتجنب أخطاء التحميل.",
        Download_Sample_Text: "لست متأكدًا من التنسيق الصحيح؟",
        Download_Sample_Link_Text: "قم بتنزيل ملف CSV النموذجي",
        Download_Sample_Append_Text: "لاستخدامه كقالب.",
        Arabic_Form: "النموذج العربي",
        English_Form: "النموذج الإنجليزي",
        Introduction: "المقدمة",
        Female_Recipient_Title: "عنوان المستلمة",
        Male_Recipient_Title: "عنوان المستلم",
        Greeting_Male: "تحية للذكور",
        Greeting_Female: "تحية للإناث",
        Certificate_Description_Male: "وصف الشهادة للذكور",
        Certificate_Description_Female: "وصف الشهادة للإناث",
        Female_Recipient_Title_EN: "عنوان المستلمة (EN)",
        Male_Recipient_Title_EN: "عنوان المستلم (EN)",
        Greeting_Male_EN: "تحية للذكور (EN)",
        Greeting_Female_EN: "تحية للإناث (EN)",
        Certificate_Description_Male_EN: "وصف الشهادة للذكور (EN)",
        Certificate_Description_Female_EN: "وصف الشهادة للإناث (EN)",
        Cancel: "إلغاء",
        Your_Events: "الأنشطة التي قمت بإنشائها",
        Latest_Event: "آخر الأنشطة",
        Presenter: "المقدم :",
        Event_Date: "تاريخ النشاط :",
        Event_Type: "نوع النشاط :",
        More_Info: "المزيد من المعلومات",
        Load_More: "تحميل المزيد",
        Add_Events: "إضافة نشاط",
        Add_New_Template: "إضافة قالب جديد",
        Template_Image: "صورة القالب",
        Manage_Event_Types: "إدارة أنواع الأنشطة",
        Add_New_Type: "إضافة نوع جديد",
        Type_Name: "اسم النوع",
        Save: "حفظ",
        Cancel: "إلغاء",
        Delete_Existing_Type: "حذف نوع موجود",
        Select_Type_To_Delete: "حدد نوع للحذف",
        Delete: "حذف",
        Rights_Reserved: '© 2023 <a href="https://github.com/zalsaeed/cgav" class="hover:underline">مُصدّر</a>. جميع الحقوق محفوظة.',
        Enter_Event_Title: "أدخل عنوان النشاط",
        Enter_Secret_Phrase: "أدخل العبارة السرية",
        Enter_Presenter_Name: "أدخل اسم المقدم",
        Enter_First_Signatory_Name: "أدخل اسم الموقع الأول",
        Enter_First_Signatory_Position: "أدخل منصب الموقع الأول",
        Enter_Second_Signatory_Name: "أدخل اسم الموقع الثاني",
        Enter_Second_Signatory_Position: "أدخل منصب الموقع الثاني",
        Enter_Female_Recipient_Title: "المتدربة:",
        Enter_Male_Recipient_Title: "المتدرب:",
        Enter_Intro: "تشهد كلية الحاسب بجامعة القصيم",
        Greeting_Male_Placeholder: "مع تمنياتنا له بالتوفيق والنجاح",
        Greeting_Female_Placeholder: "مع تمنياتنا لها بالتوفيق والنجاح",
        Public_Profile: 'الملف الشخصي العام',
        Name: 'الاسم:',
        Change_Name: 'تغيير الاسم',
        Change_Email: 'تغيير البريد الإلكتروني',
        Change_Password: 'تغيير كلمة المرور',
        No_More_Events: "لا توجد أنشطة أخرى",
        All_Events: "جميع الأنشطة",
        Add: 'إضافة',
        Type_Template_Name: 'ادخل اسم القالب',
        Select_Language: ' اختر لغة محتوى الايميل:',
        English: "الإنجليزية",
        Arabic: 'العربية',
        Send_Emails: 'ارسال ايميل',
        Select_All: 'اختر الكل',
        Select_Emails: 'اختر الإيميل: ',
        Subject: 'العنوان:',
        Content: 'المحتوى: ',
        Send_Email: 'ارسل ايميل',
        Customize_Email: 'بريد إلكتروني مخصص',
        Enter_Content: 'عزيزي/تي المتدرب/ـة\n\nفي المرفق شهادة حضورك  .',
        Enter_Subjectt: 'شهادة حضور',
        Preview_Default_Email: "معاينة رسالة البريد الإلكتروني الإفتراضية:",
        Include_Event_Information: 'إضافة معلومات النشاط في الرسالة',
    }
};

const setLanguage = (language) => {
    console.log(`Setting language to: ${language}`);
    const elements = document.querySelectorAll("[data-i18n]");
    elements.forEach((element) => {
        const translationKey = element.getAttribute("data-i18n");
        if (translations[language][translationKey]) {
            if (element.tagName.toLowerCase() === 'input' && element.type === 'submit') {
                element.value = translations[language][translationKey];
            } else if (translationKey === 'Rights_Reserved') {
                const link = element.querySelector('a').outerHTML;
                element.innerHTML = translations[language][translationKey].replace('<a href="https://github.com/zalsaeed/cgav" class="hover:underline">مُصدّر</a>', link);
            } else {
                element.innerHTML = translations[language][translationKey];
            }
        }
    });

    // Update the Download_Sample section
    const downloadSampleText = translations[language].Download_Sample_Text;
    const downloadSampleLinkText = translations[language].Download_Sample_Link_Text;
    const downloadSampleAppendText = translations[language].Download_Sample_Append_Text;

    const downloadSampleElement = document.querySelector("[data-i18n='Download_Sample']");
    if (downloadSampleElement && downloadSampleElement.classList.contains("sample-link-1")) {
        downloadSampleElement.innerHTML = `
                ${downloadSampleText}
                <a href="/static/sample_csv/sample-data_aren.csv" class="text-blue-600 hover:text-blue-800 font-bold" data-i18n="Download_Sample_Link_Text" download>
                    ${downloadSampleLinkText}
                </a>
                ${downloadSampleAppendText}
            `;
    } else if (downloadSampleElement && downloadSampleElement.classList.contains("sample-link-2")) {
        downloadSampleElement.innerHTML = `
                ${downloadSampleText}
                <a href="/static/sample_csv/sample-data_en.csv" class="text-blue-600 hover:text-blue-800 font-bold" data-i18n="Download_Sample_Link_Text" download>
                    ${downloadSampleLinkText}
                </a>
                ${downloadSampleAppendText}
            `;
    } else if (downloadSampleElement && downloadSampleElement.classList.contains("sample-link-3")) {
        downloadSampleElement.innerHTML = `
                ${downloadSampleText}
                <a href="/static/sample_csv/sample-data_ar.csv" class="text-blue-600 hover:text-blue-800 font-bold" data-i18n="Download_Sample_Link_Text" download>
                    ${downloadSampleLinkText}
                </a>
                ${downloadSampleAppendText}
            `;
    }

    const placeholderElements = document.querySelectorAll("[data-i18n-placeholder]");
    placeholderElements.forEach((element) => {
        const placeholderKey = element.getAttribute("data-i18n-placeholder");
        if (translations[language][placeholderKey]) {
            element.setAttribute("placeholder", translations[language][placeholderKey]);
        }
    });

    document.dir = language === "ar" ? "rtl" : "ltr";

    // Access the navbar items
    const navbarItems = document.querySelectorAll("#navbar-user ul li a");

    // Access the checkboxes within #webcheck and #Xcheck
    const webCheckbox = document.querySelector("#web-checkbox");
    const twitterCheckbox = document.querySelector("#twitter-checkbox");

    if (language === "ar") {
        navbarItems.forEach((item) => {
            item.style.paddingLeft = "1rem";
        });
        if (webCheckbox) {
            webCheckbox.style.marginLeft = "0.5rem";
        } else {
            console.log("Web checkbox not found");
        }
        if (twitterCheckbox) {
            twitterCheckbox.style.marginLeft = "0.5rem";
        } else {
            console.log("Twitter checkbox not found");
        }
    } else {
        navbarItems.forEach((item) => {
            item.style.paddingLeft = "";
        });
        if (webCheckbox) {
            webCheckbox.style.marginLeft = "";
        }
        if (twitterCheckbox) {
            twitterCheckbox.style.marginLeft = "";
        }
    }
};

const updateDynamicTranslations = (language) => {
    const dynamicElements = document.querySelectorAll("[data-i18n]");
    dynamicElements.forEach((element) => {
        const translationKey = element.getAttribute("data-i18n");
        if (translations[language][translationKey]) {
            element.innerHTML = translations[language][translationKey];
        }
    });
};

document.addEventListener("DOMContentLoaded", () => {
    const language = localStorage.getItem("lang") || "en";
    console.log(`Language on DOMContentLoaded: ${language}`);
    setLanguage(language);

    const languageSelector = document.getElementById("languageSelector");
    if (languageSelector) {
        languageSelector.addEventListener("change", (event) => {
            setLanguage(event.target.value);
            localStorage.setItem("lang", event.target.value);
        });
    }
});

